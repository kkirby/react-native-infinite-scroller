function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

import React, { Component } from 'react';
import Animated from 'react-native-reanimated';
import { PanGestureHandler } from 'react-native-gesture-handler';
import InfiniteElement from './InfiniteElement';
import InfiniteCalculator from './InfiniteCalculator';
import InfiniteItem from './InfiniteItem';
import AnimationLogic from './AnimationLogic';
export default class InfiniteScroller extends Component {
  constructor(props) {
    super(props);

    _defineProperty(this, "infiniteCalculator", void 0);

    _defineProperty(this, "infiniteElements", []);

    _defineProperty(this, "animationLogic", void 0);

    _defineProperty(this, "currentElement", void 0);

    _defineProperty(this, "panHandlerRef", void 0);

    _defineProperty(this, "onScrollEnd", ({
      x
    }) => {
      this.infiniteCalculator.x = x;

      if (this.props.onScrollEnd) {
        x *= -1;
        this.currentElement = this.infiniteElements.find(element => {
          return element.left === x;
        });

        if (this.currentElement != null) {
          this.props.onScrollEnd(this.currentElement.phase, this.currentElement.data, this);
        } else {
          console.warn('InfiniteScroller is unable to determine the current item after the scroll ended.');
        }
      }
    });

    _defineProperty(this, "onItemLayout", ({
      nativeEvent: {
        layout: {
          width,
          height
        }
      }
    }) => {
      const {
        itemLayout
      } = this.state;

      if (itemLayout.width !== width || itemLayout.height !== height) {
        this.setState({
          itemLayout: {
            width,
            height
          }
        });
      }
    });

    _defineProperty(this, "onWrapperLayout", ({
      nativeEvent: {
        layout: {
          width,
          height
        }
      }
    }) => {
      const {
        wrapperLayout
      } = this.state;

      if (wrapperLayout.width !== width || wrapperLayout.height !== height) {
        this.setState({
          wrapperLayout: {
            width,
            height
          }
        });
      }
    });

    this.state = {
      itemLayout: props.itemDimensions || {
        width: 0,
        height: 0
      },
      wrapperLayout: props.wrapperDimensions || {
        width: 0,
        height: 0
      },
      ready: false
    };
    this.infiniteElements = [];

    for (let i = 0; i < (props.infiniteElementCount || 100); i++) {
      this.infiniteElements.push(new InfiniteElement());
    }

    this.infiniteCalculator = new InfiniteCalculator(_objectSpread({}, props, {
      infiniteLimit: Math.floor(2147483645 / 1000),
      infiniteElements: this.infiniteElements,
      cacheSize: this.infiniteElements.length * 2
    }));
    const startingPosition = props.startingPosition != null ? -1 * props.startingPosition * this.state.itemLayout.width : 0;
    this.animationLogic = AnimationLogic({
      springConfig: props.springConfig || {},
      decayConfig: props.decayConfig || {},
      centerScroll: props.centerInWrapper != null ? props.centerInWrapper : false,
      wrapperWidth: this.state.wrapperLayout.width,
      itemWidth: this.state.itemLayout.width,
      hasMaxScroll: this.state.itemLayout.width !== 0 && props.totalItemCount != null,
      maxScroll: this.state.itemLayout.width !== 0 && props.totalItemCount != null ? -1 * this.state.itemLayout.width * (props.totalItemCount - 1) : 0,
      startingPosition
    });
    this.animationLogic.on('change', value => {
      this.infiniteCalculator.x = value;
    });
    this.animationLogic.on('scrollEnd', this.onScrollEnd);
    this.panHandlerRef = React.createRef();
    this.onUpdate(false);

    if (startingPosition !== 0) {
      this.onScrollEnd({
        x: startingPosition
      });
    }
  }

  onUpdate(isMounted = true) {
    this.animationLogic.updateCenterScroll(this.props.centerInWrapper != null ? this.props.centerInWrapper : false);

    if (this.state.itemLayout.width !== 0) {
      this.infiniteCalculator.infiniteElementWidth = this.state.itemLayout.width;
      this.animationLogic.updateItemWidth(this.state.itemLayout.width);
    }

    if (this.state.wrapperLayout.width !== 0) {
      this.infiniteCalculator.wrapperWidth = this.state.wrapperLayout.width;
      this.animationLogic.updateWrapperWidth(this.state.wrapperLayout.width);
    }

    if (this.state.itemLayout.width && this.props.totalItemCount != null) {
      this.animationLogic.updateMaxScroll(-1 * this.state.itemLayout.width * (this.props.totalItemCount - 1));
    }

    this.infiniteCalculator.reorderInfinite();
    this.onReady(isMounted);
  }

  onReady(isMounted = true) {
    if (this.state.ready === false) {
      if (this.state.itemLayout.width !== 0 && this.state.wrapperLayout.width !== 0) {
        if (isMounted) {
          this.setState({
            ready: true
          });
        } else {
          this.state = _objectSpread({}, this.state, {
            ready: true
          });
        }
      }
    }
  }

  componentDidUpdate(prevProps, prevState) {
    let didChange = false;
    didChange = didChange || prevState.itemLayout.width !== this.state.itemLayout.width;
    didChange = didChange || prevState.wrapperLayout.width !== this.state.wrapperLayout.width;
    didChange = didChange || prevState.ready !== this.state.ready;
    didChange = didChange || prevProps.centerInWrapper !== this.props.centerInWrapper;
    didChange = didChange || prevProps.totalItemCount !== this.props.totalItemCount;

    if (didChange) {
      this.onUpdate();
    }

    if (prevProps.dataset !== this.props.dataset) {
      console.log('refresh dataset');
      this.datasetNeedsRefresh();
    }
  }

  datasetNeedsRefresh() {
    this.infiniteCalculator.updateDataset(this.props.dataset);
  }

  componentWillUnmount() {
    this.infiniteCalculator.dispose();
  }

  calculateCurrentIndex(moveXValue) {
    const itemWidth = this.state.itemLayout.width;
    const wrapperWidth = this.state.wrapperLayout.width;
    const centerInWrapper = this.props.centerInWrapper != null ? this.props.centerInWrapper : false;
    const center = centerInWrapper ? wrapperWidth / 2 - itemWidth / 2 : 0;
    /**
     * The value will be slighly off because our snap end threshhold is a
     * bit high to ensure events are triggered in a timley manner.
     **/

    return Math.round((center - moveXValue) / itemWidth);
  }

  getCurrentIndex() {
    return this.calculateCurrentIndex(this.infiniteCalculator.x);
  }

  async goNext(withAnimation = true) {
    const index = this.getCurrentIndex();
    return this.scrollToIndex(index + 1, withAnimation);
  }

  async goBack(withAnimation = true) {
    const index = this.getCurrentIndex();
    return this.scrollToIndex(index - 1, withAnimation);
  }

  scrollToIndex(itemOffset, withAnimation = true) {
    this.animationLogic.scrollTo(-1 * itemOffset * this.state.itemLayout.width, withAnimation);
  }

  scrollToElement(element, withAnimation) {
    return this.scrollToIndex(element.phase, withAnimation);
  }

  findNearestInfiniteElement(comparator) {
    const x = -1 * this.infiniteCalculator.x;
    let elements = [...this.infiniteElements].sort((a, b) => {
      const aDelta = Math.abs(x - a.left);
      const bDelta = Math.abs(x - b.left);
      return aDelta - bDelta;
    });
    return elements.find(item => comparator(item));
  }

  scrollToItem(comparator, withAnimation) {
    const element = this.findNearestInfiniteElement(elm => elm.data != null ? comparator(elm.data) : false);

    if (element) {
      return this.scrollToElement(element, withAnimation);
    }
  }

  render() {
    const style = {
      height: this.state.itemLayout.height,
      opacity: this.state.ready ? 1 : 0
    };
    return <PanGestureHandler ref={this.panHandlerRef} simultaneousHandlers={this.props.simultaneousHandlers} waitFor={this.props.waitFor} onGestureEvent={this.animationLogic.gestureHandler} onHandlerStateChange={this.animationLogic.gestureHandler}>
				<Animated.View style={[this.props.style, style]} onLayout={this.onWrapperLayout}>
					<Animated.View style={{
          transform: [{
            translateX: this.animationLogic.x
          }, {
            perspective: 1000
          } // without this line this Animation will not render on Android while working fine on iOS
          ]
        }}>
						{this.infiniteElements.map((item, i) => {
            return <InfiniteItem elementIndex={i} renderItem={this.props.renderItem} item={item} key={i} onLayout={i === 0 ? this.onItemLayout : null} />;
          })}
					</Animated.View>
				</Animated.View>
			</PanGestureHandler>;
  }

}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsIkNvbXBvbmVudCIsIkFuaW1hdGVkIiwiUGFuR2VzdHVyZUhhbmRsZXIiLCJJbmZpbml0ZUVsZW1lbnQiLCJJbmZpbml0ZUNhbGN1bGF0b3IiLCJJbmZpbml0ZUl0ZW0iLCJBbmltYXRpb25Mb2dpYyIsIkluZmluaXRlU2Nyb2xsZXIiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwieCIsImluZmluaXRlQ2FsY3VsYXRvciIsIm9uU2Nyb2xsRW5kIiwiY3VycmVudEVsZW1lbnQiLCJpbmZpbml0ZUVsZW1lbnRzIiwiZmluZCIsImVsZW1lbnQiLCJsZWZ0IiwicGhhc2UiLCJkYXRhIiwiY29uc29sZSIsIndhcm4iLCJuYXRpdmVFdmVudCIsImxheW91dCIsIndpZHRoIiwiaGVpZ2h0IiwiaXRlbUxheW91dCIsInN0YXRlIiwic2V0U3RhdGUiLCJ3cmFwcGVyTGF5b3V0IiwiaXRlbURpbWVuc2lvbnMiLCJ3cmFwcGVyRGltZW5zaW9ucyIsInJlYWR5IiwiaSIsImluZmluaXRlRWxlbWVudENvdW50IiwicHVzaCIsImluZmluaXRlTGltaXQiLCJNYXRoIiwiZmxvb3IiLCJjYWNoZVNpemUiLCJsZW5ndGgiLCJzdGFydGluZ1Bvc2l0aW9uIiwiYW5pbWF0aW9uTG9naWMiLCJzcHJpbmdDb25maWciLCJkZWNheUNvbmZpZyIsImNlbnRlclNjcm9sbCIsImNlbnRlckluV3JhcHBlciIsIndyYXBwZXJXaWR0aCIsIml0ZW1XaWR0aCIsImhhc01heFNjcm9sbCIsInRvdGFsSXRlbUNvdW50IiwibWF4U2Nyb2xsIiwib24iLCJ2YWx1ZSIsInBhbkhhbmRsZXJSZWYiLCJjcmVhdGVSZWYiLCJvblVwZGF0ZSIsImlzTW91bnRlZCIsInVwZGF0ZUNlbnRlclNjcm9sbCIsImluZmluaXRlRWxlbWVudFdpZHRoIiwidXBkYXRlSXRlbVdpZHRoIiwidXBkYXRlV3JhcHBlcldpZHRoIiwidXBkYXRlTWF4U2Nyb2xsIiwicmVvcmRlckluZmluaXRlIiwib25SZWFkeSIsImNvbXBvbmVudERpZFVwZGF0ZSIsInByZXZQcm9wcyIsInByZXZTdGF0ZSIsImRpZENoYW5nZSIsImRhdGFzZXQiLCJsb2ciLCJkYXRhc2V0TmVlZHNSZWZyZXNoIiwidXBkYXRlRGF0YXNldCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiZGlzcG9zZSIsImNhbGN1bGF0ZUN1cnJlbnRJbmRleCIsIm1vdmVYVmFsdWUiLCJjZW50ZXIiLCJyb3VuZCIsImdldEN1cnJlbnRJbmRleCIsImdvTmV4dCIsIndpdGhBbmltYXRpb24iLCJpbmRleCIsInNjcm9sbFRvSW5kZXgiLCJnb0JhY2siLCJpdGVtT2Zmc2V0Iiwic2Nyb2xsVG8iLCJzY3JvbGxUb0VsZW1lbnQiLCJmaW5kTmVhcmVzdEluZmluaXRlRWxlbWVudCIsImNvbXBhcmF0b3IiLCJlbGVtZW50cyIsInNvcnQiLCJhIiwiYiIsImFEZWx0YSIsImFicyIsImJEZWx0YSIsIml0ZW0iLCJzY3JvbGxUb0l0ZW0iLCJlbG0iLCJyZW5kZXIiLCJzdHlsZSIsIm9wYWNpdHkiLCJzaW11bHRhbmVvdXNIYW5kbGVycyIsIndhaXRGb3IiLCJnZXN0dXJlSGFuZGxlciIsIm9uV3JhcHBlckxheW91dCIsInRyYW5zZm9ybSIsInRyYW5zbGF0ZVgiLCJwZXJzcGVjdGl2ZSIsIm1hcCIsInJlbmRlckl0ZW0iLCJvbkl0ZW1MYXlvdXQiXSwic291cmNlcyI6WyIuLi9zcmMvSW5maW5pdGVTY3JvbGxlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0xheW91dENoYW5nZUV2ZW50LCBTdHlsZVByb3AsIFZpZXdTdHlsZSwgVmlld30gZnJvbSAncmVhY3QtbmF0aXZlJztcblxuaW1wb3J0IEFuaW1hdGVkIGZyb20gJ3JlYWN0LW5hdGl2ZS1yZWFuaW1hdGVkJztcbmltcG9ydCB7UGFuR2VzdHVyZUhhbmRsZXJ9IGZyb20gJ3JlYWN0LW5hdGl2ZS1nZXN0dXJlLWhhbmRsZXInO1xuaW1wb3J0IEluZmluaXRlRWxlbWVudCBmcm9tICcuL0luZmluaXRlRWxlbWVudCc7XG5pbXBvcnQgSW5maW5pdGVDYWxjdWxhdG9yIGZyb20gJy4vSW5maW5pdGVDYWxjdWxhdG9yJztcbmltcG9ydCBJbmZpbml0ZUl0ZW0gZnJvbSAnLi9JbmZpbml0ZUl0ZW0nO1xuaW1wb3J0IEFuaW1hdGlvbkxvZ2ljIGZyb20gJy4vQW5pbWF0aW9uTG9naWMnO1xuXG5pbnRlcmZhY2UgSW5maW5pdGVTY3JvbGxlclByb3BzPFQ+IHtcblx0ZGF0YXNldChzdGFydDogbnVtYmVyLCBjb3VudDogbnVtYmVyKTogUHJvbWlzZTxUW10+O1xuXHRyZW5kZXJJdGVtOiAoZGF0YTogVCB8IG51bGwpID0+IFJlYWN0LlJlYWN0RWxlbWVudDtcblx0c3R5bGU/OiBTdHlsZVByb3A8Vmlld1N0eWxlPjtcblx0dG90YWxJdGVtQ291bnQ/OiBudW1iZXIgfCBudWxsO1xuXHRjZW50ZXJJbldyYXBwZXI/OiBib29sZWFuIHwgbnVsbDtcblx0c3RhcnRpbmdQb3NpdGlvbj86IG51bWJlciB8IG51bGw7XG5cdG9uU2Nyb2xsRW5kPzogKFxuXHRcdHNjcm9sbFBvc2l0aW9uOiBudW1iZXIsXG5cdFx0ZGF0YTogVCB8IG51bGwsXG5cdFx0c2Nyb2xsZXI6IEluZmluaXRlU2Nyb2xsZXI8VD4sXG5cdCkgPT4gdm9pZCB8IG51bGw7XG5cdGluZmluaXRlRWxlbWVudENvdW50PzogbnVtYmVyIHwgbnVsbDtcblx0d2FpdEZvcj86IFJlYWN0LlJlZk9iamVjdDxhbnk+W107XG5cdHNpbXVsdGFuZW91c0hhbmRsZXJzPzogUmVhY3QuUmVmT2JqZWN0PGFueT5bXTtcblx0c3ByaW5nQ29uZmlnPzogT2JqZWN0O1xuXHRkZWNheUNvbmZpZz86IE9iamVjdDtcblx0aXRlbURpbWVuc2lvbnM/OiB7XG5cdFx0d2lkdGg6IG51bWJlcjtcblx0XHRoZWlnaHQ6IG51bWJlcjtcblx0fSB8IG51bGw7XG5cdHdyYXBwZXJEaW1lbnNpb25zPzoge1xuXHRcdHdpZHRoOiBudW1iZXI7XG5cdFx0aGVpZ2h0OiBudW1iZXI7XG5cdH0gfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgSW5maW5pdGVTY3JvbGxlclN0YXRlIHtcblx0aXRlbUxheW91dDoge1xuXHRcdHdpZHRoOiBudW1iZXI7XG5cdFx0aGVpZ2h0OiBudW1iZXI7XG5cdH07XG5cdHdyYXBwZXJMYXlvdXQ6IHtcblx0XHR3aWR0aDogbnVtYmVyO1xuXHRcdGhlaWdodDogbnVtYmVyO1xuXHR9O1xuXHRyZWFkeTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5maW5pdGVTY3JvbGxlcjxUPiBleHRlbmRzIENvbXBvbmVudDxcblx0SW5maW5pdGVTY3JvbGxlclByb3BzPFQ+LFxuXHRJbmZpbml0ZVNjcm9sbGVyU3RhdGVcbj4ge1xuXHRpbmZpbml0ZUNhbGN1bGF0b3I6IEluZmluaXRlQ2FsY3VsYXRvcjxUPjtcblx0aW5maW5pdGVFbGVtZW50czogSW5maW5pdGVFbGVtZW50PFQ+W10gPSBbXTtcblx0YW5pbWF0aW9uTG9naWM6IEFuaW1hdGlvbkxvZ2ljO1xuXHRjdXJyZW50RWxlbWVudD86IEluZmluaXRlRWxlbWVudDxUPiB8IG51bGw7XG5cdHBhbkhhbmRsZXJSZWY6IFJlYWN0LlJlZk9iamVjdDxQYW5HZXN0dXJlSGFuZGxlcj47XG5cblx0Y29uc3RydWN0b3IocHJvcHM6IEluZmluaXRlU2Nyb2xsZXJQcm9wczxUPikge1xuXHRcdHN1cGVyKHByb3BzKTtcblx0XHR0aGlzLnN0YXRlID0ge1xuXHRcdFx0aXRlbUxheW91dDogcHJvcHMuaXRlbURpbWVuc2lvbnMgfHwge1xuXHRcdFx0XHR3aWR0aDogMCxcblx0XHRcdFx0aGVpZ2h0OiAwLFxuXHRcdFx0fSxcblx0XHRcdHdyYXBwZXJMYXlvdXQ6IHByb3BzLndyYXBwZXJEaW1lbnNpb25zIHx8IHtcblx0XHRcdFx0d2lkdGg6IDAsXG5cdFx0XHRcdGhlaWdodDogMCxcblx0XHRcdH0sXG5cdFx0XHRyZWFkeTogZmFsc2UsXG5cdFx0fTtcblx0XHR0aGlzLmluZmluaXRlRWxlbWVudHMgPSBbXTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgKHByb3BzLmluZmluaXRlRWxlbWVudENvdW50IHx8IDEwMCk7IGkrKykge1xuXHRcdFx0dGhpcy5pbmZpbml0ZUVsZW1lbnRzLnB1c2gobmV3IEluZmluaXRlRWxlbWVudDxUPigpKTtcblx0XHR9XG5cblx0XHR0aGlzLmluZmluaXRlQ2FsY3VsYXRvciA9IG5ldyBJbmZpbml0ZUNhbGN1bGF0b3Ioe1xuXHRcdFx0Li4ucHJvcHMsXG5cdFx0XHRpbmZpbml0ZUxpbWl0OiBNYXRoLmZsb29yKDIxNDc0ODM2NDUgLyAxMDAwKSxcblx0XHRcdGluZmluaXRlRWxlbWVudHM6IHRoaXMuaW5maW5pdGVFbGVtZW50cyxcblx0XHRcdGNhY2hlU2l6ZTogdGhpcy5pbmZpbml0ZUVsZW1lbnRzLmxlbmd0aCAqIDIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBzdGFydGluZ1Bvc2l0aW9uID1cblx0XHRcdHByb3BzLnN0YXJ0aW5nUG9zaXRpb24gIT0gbnVsbFxuXHRcdFx0XHQ/IC0xICogcHJvcHMuc3RhcnRpbmdQb3NpdGlvbiAqIHRoaXMuc3RhdGUuaXRlbUxheW91dC53aWR0aFxuXHRcdFx0XHQ6IDA7XG5cblx0XHR0aGlzLmFuaW1hdGlvbkxvZ2ljID0gQW5pbWF0aW9uTG9naWMoe1xuXHRcdFx0c3ByaW5nQ29uZmlnOiBwcm9wcy5zcHJpbmdDb25maWcgfHwge30sXG5cdFx0XHRkZWNheUNvbmZpZzogcHJvcHMuZGVjYXlDb25maWcgfHwge30sXG5cdFx0XHRjZW50ZXJTY3JvbGw6XG5cdFx0XHRcdHByb3BzLmNlbnRlckluV3JhcHBlciAhPSBudWxsID8gcHJvcHMuY2VudGVySW5XcmFwcGVyIDogZmFsc2UsXG5cdFx0XHR3cmFwcGVyV2lkdGg6IHRoaXMuc3RhdGUud3JhcHBlckxheW91dC53aWR0aCxcblx0XHRcdGl0ZW1XaWR0aDogdGhpcy5zdGF0ZS5pdGVtTGF5b3V0LndpZHRoLFxuXHRcdFx0aGFzTWF4U2Nyb2xsOiB0aGlzLnN0YXRlLml0ZW1MYXlvdXQud2lkdGggIT09IDAgJiYgcHJvcHMudG90YWxJdGVtQ291bnQgIT0gbnVsbCxcblx0XHRcdG1heFNjcm9sbDpcblx0XHRcdFx0dGhpcy5zdGF0ZS5pdGVtTGF5b3V0LndpZHRoICE9PSAwICYmXG5cdFx0XHRcdHByb3BzLnRvdGFsSXRlbUNvdW50ICE9IG51bGxcblx0XHRcdFx0XHQ/IC0xICogdGhpcy5zdGF0ZS5pdGVtTGF5b3V0LndpZHRoICogKHByb3BzLnRvdGFsSXRlbUNvdW50IC0gMSlcblx0XHRcdFx0XHQ6IDAsXG5cdFx0XHRzdGFydGluZ1Bvc2l0aW9uLFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hbmltYXRpb25Mb2dpYy5vbignY2hhbmdlJywgdmFsdWUgPT4ge1xuXHRcdFx0dGhpcy5pbmZpbml0ZUNhbGN1bGF0b3IueCA9IHZhbHVlO1xuXHRcdH0pO1xuXHRcdHRoaXMuYW5pbWF0aW9uTG9naWMub24oJ3Njcm9sbEVuZCcsIHRoaXMub25TY3JvbGxFbmQpO1xuXG5cdFx0dGhpcy5wYW5IYW5kbGVyUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG5cblx0XHR0aGlzLm9uVXBkYXRlKGZhbHNlKTtcblxuXHRcdGlmIChzdGFydGluZ1Bvc2l0aW9uICE9PSAwKSB7XG5cdFx0XHR0aGlzLm9uU2Nyb2xsRW5kKHt4OiBzdGFydGluZ1Bvc2l0aW9ufSk7XG5cdFx0fVxuXHR9XG5cblx0b25TY3JvbGxFbmQgPSAoe3h9OiB7eDogbnVtYmVyfSkgPT4ge1xuXHRcdHRoaXMuaW5maW5pdGVDYWxjdWxhdG9yLnggPSB4O1xuXHRcdGlmICh0aGlzLnByb3BzLm9uU2Nyb2xsRW5kKSB7XG5cdFx0XHR4ICo9IC0xO1xuXHRcdFx0dGhpcy5jdXJyZW50RWxlbWVudCA9IHRoaXMuaW5maW5pdGVFbGVtZW50cy5maW5kKGVsZW1lbnQgPT4ge1xuXHRcdFx0XHRyZXR1cm4gZWxlbWVudC5sZWZ0ID09PSB4O1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAodGhpcy5jdXJyZW50RWxlbWVudCAhPSBudWxsKSB7XG5cdFx0XHRcdHRoaXMucHJvcHMub25TY3JvbGxFbmQoXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50RWxlbWVudC5waGFzZSxcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRFbGVtZW50LmRhdGEsXG5cdFx0XHRcdFx0dGhpcyxcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUud2Fybihcblx0XHRcdFx0XHQnSW5maW5pdGVTY3JvbGxlciBpcyB1bmFibGUgdG8gZGV0ZXJtaW5lIHRoZSBjdXJyZW50IGl0ZW0gYWZ0ZXIgdGhlIHNjcm9sbCBlbmRlZC4nLFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRvblVwZGF0ZShpc01vdW50ZWQ6IGJvb2xlYW4gPSB0cnVlKSB7XG5cdFx0dGhpcy5hbmltYXRpb25Mb2dpYy51cGRhdGVDZW50ZXJTY3JvbGwoXG5cdFx0XHR0aGlzLnByb3BzLmNlbnRlckluV3JhcHBlciAhPSBudWxsXG5cdFx0XHRcdD8gdGhpcy5wcm9wcy5jZW50ZXJJbldyYXBwZXJcblx0XHRcdFx0OiBmYWxzZSxcblx0XHQpO1xuXHRcdGlmICh0aGlzLnN0YXRlLml0ZW1MYXlvdXQud2lkdGggIT09IDApIHtcblx0XHRcdHRoaXMuaW5maW5pdGVDYWxjdWxhdG9yLmluZmluaXRlRWxlbWVudFdpZHRoID0gdGhpcy5zdGF0ZS5pdGVtTGF5b3V0LndpZHRoO1xuXHRcdFx0dGhpcy5hbmltYXRpb25Mb2dpYy51cGRhdGVJdGVtV2lkdGgodGhpcy5zdGF0ZS5pdGVtTGF5b3V0LndpZHRoKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5zdGF0ZS53cmFwcGVyTGF5b3V0LndpZHRoICE9PSAwKSB7XG5cdFx0XHR0aGlzLmluZmluaXRlQ2FsY3VsYXRvci53cmFwcGVyV2lkdGggPSB0aGlzLnN0YXRlLndyYXBwZXJMYXlvdXQud2lkdGg7XG5cdFx0XHR0aGlzLmFuaW1hdGlvbkxvZ2ljLnVwZGF0ZVdyYXBwZXJXaWR0aChcblx0XHRcdFx0dGhpcy5zdGF0ZS53cmFwcGVyTGF5b3V0LndpZHRoLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5zdGF0ZS5pdGVtTGF5b3V0LndpZHRoICYmIHRoaXMucHJvcHMudG90YWxJdGVtQ291bnQgIT0gbnVsbCkge1xuXHRcdFx0dGhpcy5hbmltYXRpb25Mb2dpYy51cGRhdGVNYXhTY3JvbGwoXG5cdFx0XHRcdC0xICogdGhpcy5zdGF0ZS5pdGVtTGF5b3V0LndpZHRoICogKHRoaXMucHJvcHMudG90YWxJdGVtQ291bnQgLSAxKSxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5pbmZpbml0ZUNhbGN1bGF0b3IucmVvcmRlckluZmluaXRlKCk7XG5cblx0XHR0aGlzLm9uUmVhZHkoaXNNb3VudGVkKTtcblx0fVxuXG5cdG9uUmVhZHkoaXNNb3VudGVkOiBib29sZWFuID0gdHJ1ZSkge1xuXHRcdGlmICh0aGlzLnN0YXRlLnJlYWR5ID09PSBmYWxzZSkge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHR0aGlzLnN0YXRlLml0ZW1MYXlvdXQud2lkdGggIT09IDAgJiZcblx0XHRcdFx0dGhpcy5zdGF0ZS53cmFwcGVyTGF5b3V0LndpZHRoICE9PSAwXG5cdFx0XHQpIHtcblx0XHRcdFx0aWYgKGlzTW91bnRlZCkge1xuXHRcdFx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRcdFx0cmVhZHk6IHRydWUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdFx0XHRcdC4uLnRoaXMuc3RhdGUsXG5cdFx0XHRcdFx0XHRyZWFkeTogdHJ1ZSxcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Y29tcG9uZW50RGlkVXBkYXRlKFxuXHRcdHByZXZQcm9wczogSW5maW5pdGVTY3JvbGxlclByb3BzPFQ+LFxuXHRcdHByZXZTdGF0ZTogSW5maW5pdGVTY3JvbGxlclN0YXRlLFxuXHQpIHtcblx0XHRsZXQgZGlkQ2hhbmdlID0gZmFsc2U7XG5cdFx0ZGlkQ2hhbmdlID1cblx0XHRcdGRpZENoYW5nZSB8fFxuXHRcdFx0cHJldlN0YXRlLml0ZW1MYXlvdXQud2lkdGggIT09IHRoaXMuc3RhdGUuaXRlbUxheW91dC53aWR0aDtcblx0XHRkaWRDaGFuZ2UgPVxuXHRcdFx0ZGlkQ2hhbmdlIHx8XG5cdFx0XHRwcmV2U3RhdGUud3JhcHBlckxheW91dC53aWR0aCAhPT0gdGhpcy5zdGF0ZS53cmFwcGVyTGF5b3V0LndpZHRoO1xuXHRcdGRpZENoYW5nZSA9IGRpZENoYW5nZSB8fCBwcmV2U3RhdGUucmVhZHkgIT09IHRoaXMuc3RhdGUucmVhZHk7XG5cdFx0ZGlkQ2hhbmdlID1cblx0XHRcdGRpZENoYW5nZSB8fFxuXHRcdFx0cHJldlByb3BzLmNlbnRlckluV3JhcHBlciAhPT0gdGhpcy5wcm9wcy5jZW50ZXJJbldyYXBwZXI7XG5cdFx0ZGlkQ2hhbmdlID1cblx0XHRcdGRpZENoYW5nZSB8fCBwcmV2UHJvcHMudG90YWxJdGVtQ291bnQgIT09IHRoaXMucHJvcHMudG90YWxJdGVtQ291bnQ7XG5cdFx0aWYgKGRpZENoYW5nZSkge1xuXHRcdFx0dGhpcy5vblVwZGF0ZSgpO1xuXHRcdH1cblx0XHRpZihwcmV2UHJvcHMuZGF0YXNldCAhPT0gdGhpcy5wcm9wcy5kYXRhc2V0KXtcblx0XHRcdGNvbnNvbGUubG9nKCdyZWZyZXNoIGRhdGFzZXQnKTtcblx0XHRcdHRoaXMuZGF0YXNldE5lZWRzUmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXHRcblx0ZGF0YXNldE5lZWRzUmVmcmVzaCgpe1xuXHRcdHRoaXMuaW5maW5pdGVDYWxjdWxhdG9yLnVwZGF0ZURhdGFzZXQodGhpcy5wcm9wcy5kYXRhc2V0KTtcblx0fVxuXG5cdGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuXHRcdHRoaXMuaW5maW5pdGVDYWxjdWxhdG9yLmRpc3Bvc2UoKTtcblx0fVxuXG5cdGNhbGN1bGF0ZUN1cnJlbnRJbmRleChtb3ZlWFZhbHVlOiBudW1iZXIpIHtcblx0XHRjb25zdCBpdGVtV2lkdGggPSB0aGlzLnN0YXRlLml0ZW1MYXlvdXQud2lkdGg7XG5cdFx0Y29uc3Qgd3JhcHBlcldpZHRoID0gdGhpcy5zdGF0ZS53cmFwcGVyTGF5b3V0LndpZHRoO1xuXHRcdGNvbnN0IGNlbnRlckluV3JhcHBlciA9XG5cdFx0XHR0aGlzLnByb3BzLmNlbnRlckluV3JhcHBlciAhPSBudWxsXG5cdFx0XHRcdD8gdGhpcy5wcm9wcy5jZW50ZXJJbldyYXBwZXJcblx0XHRcdFx0OiBmYWxzZTtcblx0XHRjb25zdCBjZW50ZXIgPSBjZW50ZXJJbldyYXBwZXIgPyB3cmFwcGVyV2lkdGggLyAyIC0gaXRlbVdpZHRoIC8gMiA6IDA7XG5cdFx0LyoqXG5cdFx0ICogVGhlIHZhbHVlIHdpbGwgYmUgc2xpZ2hseSBvZmYgYmVjYXVzZSBvdXIgc25hcCBlbmQgdGhyZXNoaG9sZCBpcyBhXG5cdFx0ICogYml0IGhpZ2ggdG8gZW5zdXJlIGV2ZW50cyBhcmUgdHJpZ2dlcmVkIGluIGEgdGltbGV5IG1hbm5lci5cblx0XHQgKiovXG5cdFx0cmV0dXJuIE1hdGgucm91bmQoKGNlbnRlciAtIG1vdmVYVmFsdWUpIC8gaXRlbVdpZHRoKTtcblx0fVxuXG5cdGdldEN1cnJlbnRJbmRleCgpIHtcblx0XHRyZXR1cm4gdGhpcy5jYWxjdWxhdGVDdXJyZW50SW5kZXgodGhpcy5pbmZpbml0ZUNhbGN1bGF0b3IueCk7XG5cdH1cblxuXHRhc3luYyBnb05leHQod2l0aEFuaW1hdGlvbjogYm9vbGVhbiA9IHRydWUpIHtcblx0XHRjb25zdCBpbmRleCA9IHRoaXMuZ2V0Q3VycmVudEluZGV4KCk7XG5cdFx0cmV0dXJuIHRoaXMuc2Nyb2xsVG9JbmRleChpbmRleCArIDEsIHdpdGhBbmltYXRpb24pO1xuXHR9XG5cblx0YXN5bmMgZ29CYWNrKHdpdGhBbmltYXRpb246IGJvb2xlYW4gPSB0cnVlKSB7XG5cdFx0Y29uc3QgaW5kZXggPSB0aGlzLmdldEN1cnJlbnRJbmRleCgpO1xuXHRcdHJldHVybiB0aGlzLnNjcm9sbFRvSW5kZXgoaW5kZXggLSAxLCB3aXRoQW5pbWF0aW9uKTtcblx0fVxuXG5cdHNjcm9sbFRvSW5kZXgoaXRlbU9mZnNldDogbnVtYmVyLCB3aXRoQW5pbWF0aW9uOiBib29sZWFuID0gdHJ1ZSkge1xuXHRcdHRoaXMuYW5pbWF0aW9uTG9naWMuc2Nyb2xsVG8oXG5cdFx0XHQtMSAqIGl0ZW1PZmZzZXQgKiB0aGlzLnN0YXRlLml0ZW1MYXlvdXQud2lkdGgsXG5cdFx0XHR3aXRoQW5pbWF0aW9uLFxuXHRcdCk7XG5cdH1cblxuXHRzY3JvbGxUb0VsZW1lbnQoZWxlbWVudDogSW5maW5pdGVFbGVtZW50PFQ+LCB3aXRoQW5pbWF0aW9uPzogYm9vbGVhbikge1xuXHRcdHJldHVybiB0aGlzLnNjcm9sbFRvSW5kZXgoZWxlbWVudC5waGFzZSwgd2l0aEFuaW1hdGlvbik7XG5cdH1cblxuXHRmaW5kTmVhcmVzdEluZmluaXRlRWxlbWVudChcblx0XHRjb21wYXJhdG9yOiAoaXRlbTogSW5maW5pdGVFbGVtZW50PFQ+KSA9PiBib29sZWFuLFxuXHQpOiBJbmZpbml0ZUVsZW1lbnQ8VD4gfCB1bmRlZmluZWQge1xuXHRcdGNvbnN0IHggPSAtMSAqIHRoaXMuaW5maW5pdGVDYWxjdWxhdG9yLng7XG5cdFx0bGV0IGVsZW1lbnRzID0gWy4uLnRoaXMuaW5maW5pdGVFbGVtZW50c10uc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0Y29uc3QgYURlbHRhID0gTWF0aC5hYnMoeCAtIGEubGVmdCk7XG5cdFx0XHRjb25zdCBiRGVsdGEgPSBNYXRoLmFicyh4IC0gYi5sZWZ0KTtcblx0XHRcdHJldHVybiBhRGVsdGEgLSBiRGVsdGE7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGVsZW1lbnRzLmZpbmQoaXRlbSA9PiBjb21wYXJhdG9yKGl0ZW0pKTtcblx0fVxuXG5cdHNjcm9sbFRvSXRlbShcblx0XHRjb21wYXJhdG9yOiAoaXRlbTogVCB8IG51bGwpID0+IGJvb2xlYW4sXG5cdFx0d2l0aEFuaW1hdGlvbj86IGJvb2xlYW4sXG5cdCkge1xuXHRcdGNvbnN0IGVsZW1lbnQgPSB0aGlzLmZpbmROZWFyZXN0SW5maW5pdGVFbGVtZW50KGVsbSA9PlxuXHRcdFx0ZWxtLmRhdGEgIT0gbnVsbCA/IGNvbXBhcmF0b3IoZWxtLmRhdGEpIDogZmFsc2UsXG5cdFx0KTtcblxuXHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zY3JvbGxUb0VsZW1lbnQoZWxlbWVudCwgd2l0aEFuaW1hdGlvbik7XG5cdFx0fVxuXHR9XG5cblx0b25JdGVtTGF5b3V0ID0gKHtcblx0XHRuYXRpdmVFdmVudDoge1xuXHRcdFx0bGF5b3V0OiB7d2lkdGgsIGhlaWdodH0sXG5cdFx0fSxcblx0fTogTGF5b3V0Q2hhbmdlRXZlbnQpID0+IHtcblx0XHRjb25zdCB7aXRlbUxheW91dH0gPSB0aGlzLnN0YXRlO1xuXHRcdGlmIChpdGVtTGF5b3V0LndpZHRoICE9PSB3aWR0aCB8fCBpdGVtTGF5b3V0LmhlaWdodCAhPT0gaGVpZ2h0KSB7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0aXRlbUxheW91dDoge3dpZHRoLCBoZWlnaHR9LFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdG9uV3JhcHBlckxheW91dCA9ICh7XG5cdFx0bmF0aXZlRXZlbnQ6IHtcblx0XHRcdGxheW91dDoge3dpZHRoLCBoZWlnaHR9LFxuXHRcdH0sXG5cdH06IExheW91dENoYW5nZUV2ZW50KSA9PiB7XG5cdFx0Y29uc3Qge3dyYXBwZXJMYXlvdXR9ID0gdGhpcy5zdGF0ZTtcblx0XHRpZiAod3JhcHBlckxheW91dC53aWR0aCAhPT0gd2lkdGggfHwgd3JhcHBlckxheW91dC5oZWlnaHQgIT09IGhlaWdodCkge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdHdyYXBwZXJMYXlvdXQ6IHt3aWR0aCwgaGVpZ2h0fSxcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHRyZW5kZXIoKSB7XG5cdFx0Y29uc3Qgc3R5bGUgPSB7XG5cdFx0XHRoZWlnaHQ6IHRoaXMuc3RhdGUuaXRlbUxheW91dC5oZWlnaHQsXG5cdFx0XHRvcGFjaXR5OiB0aGlzLnN0YXRlLnJlYWR5ID8gMSA6IDAsXG5cdFx0fTtcblx0XHRyZXR1cm4gKFxuXHRcdFx0PFBhbkdlc3R1cmVIYW5kbGVyXG5cdFx0XHRcdHJlZj17dGhpcy5wYW5IYW5kbGVyUmVmfVxuXHRcdFx0XHRzaW11bHRhbmVvdXNIYW5kbGVycz17dGhpcy5wcm9wcy5zaW11bHRhbmVvdXNIYW5kbGVyc31cblx0XHRcdFx0d2FpdEZvcj17dGhpcy5wcm9wcy53YWl0Rm9yfVxuXHRcdFx0XHRvbkdlc3R1cmVFdmVudD17dGhpcy5hbmltYXRpb25Mb2dpYy5nZXN0dXJlSGFuZGxlcn1cblx0XHRcdFx0b25IYW5kbGVyU3RhdGVDaGFuZ2U9e3RoaXMuYW5pbWF0aW9uTG9naWMuZ2VzdHVyZUhhbmRsZXJ9PlxuXHRcdFx0XHQ8QW5pbWF0ZWQuVmlld1xuXHRcdFx0XHRcdHN0eWxlPXtbdGhpcy5wcm9wcy5zdHlsZSwgc3R5bGVdfVxuXHRcdFx0XHRcdG9uTGF5b3V0PXt0aGlzLm9uV3JhcHBlckxheW91dH0+XG5cdFx0XHRcdFx0PEFuaW1hdGVkLlZpZXdcblx0XHRcdFx0XHRcdHN0eWxlPXt7XG5cdFx0XHRcdFx0XHRcdHRyYW5zZm9ybTogW1xuXHRcdFx0XHRcdFx0XHRcdHt0cmFuc2xhdGVYOiB0aGlzLmFuaW1hdGlvbkxvZ2ljLnh9LFxuXHRcdFx0XHRcdFx0XHRcdHtwZXJzcGVjdGl2ZTogMTAwMH0sIC8vIHdpdGhvdXQgdGhpcyBsaW5lIHRoaXMgQW5pbWF0aW9uIHdpbGwgbm90IHJlbmRlciBvbiBBbmRyb2lkIHdoaWxlIHdvcmtpbmcgZmluZSBvbiBpT1Ncblx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdH19PlxuXHRcdFx0XHRcdFx0e3RoaXMuaW5maW5pdGVFbGVtZW50cy5tYXAoKGl0ZW0sIGkpID0+IHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIChcblx0XHRcdFx0XHRcdFx0XHQ8SW5maW5pdGVJdGVtPFQ+XG5cdFx0XHRcdFx0XHRcdFx0XHRlbGVtZW50SW5kZXg9e2l9XG5cdFx0XHRcdFx0XHRcdFx0XHRyZW5kZXJJdGVtPXt0aGlzLnByb3BzLnJlbmRlckl0ZW19XG5cdFx0XHRcdFx0XHRcdFx0XHRpdGVtPXtpdGVtfVxuXHRcdFx0XHRcdFx0XHRcdFx0a2V5PXtpfVxuXHRcdFx0XHRcdFx0XHRcdFx0b25MYXlvdXQ9e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpID09PSAwID8gdGhpcy5vbkl0ZW1MYXlvdXQgOiBudWxsXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdH0pfVxuXHRcdFx0XHRcdDwvQW5pbWF0ZWQuVmlldz5cblx0XHRcdFx0PC9BbmltYXRlZC5WaWV3PlxuXHRcdFx0PC9QYW5HZXN0dXJlSGFuZGxlcj5cblx0XHQpO1xuXHR9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE9BQU9BLEtBQVAsSUFBZUMsU0FBZixRQUErQixPQUEvQjtBQUdBLE9BQU9DLFFBQVAsTUFBcUIseUJBQXJCO0FBQ0EsU0FBUUMsaUJBQVIsUUFBZ0MsOEJBQWhDO0FBQ0EsT0FBT0MsZUFBUCxNQUE0QixtQkFBNUI7QUFDQSxPQUFPQyxrQkFBUCxNQUErQixzQkFBL0I7QUFDQSxPQUFPQyxZQUFQLE1BQXlCLGdCQUF6QjtBQUNBLE9BQU9DLGNBQVAsTUFBMkIsa0JBQTNCO0FBeUNBLGVBQWUsTUFBTUMsZ0JBQU4sU0FBa0NQLFNBQWxDLENBR2I7RUFPRFEsV0FBVyxDQUFDQyxLQUFELEVBQWtDO0lBQzVDLE1BQU1BLEtBQU47O0lBRDRDOztJQUFBLDBDQUxKLEVBS0k7O0lBQUE7O0lBQUE7O0lBQUE7O0lBQUEscUNBNkQvQixDQUFDO01BQUNDO0lBQUQsQ0FBRCxLQUFzQjtNQUNuQyxLQUFLQyxrQkFBTCxD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